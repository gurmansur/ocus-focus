<header class="shadow flex px-5 py-3 border-b bg-white">
  <button
    class="rounded-full hover:bg-gray-100 p-2"
    (click)="onMenuClick(!sidebarExpanded)"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
      class="w-6 h-6"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
      />
    </svg>
  </button>
  <div
    class="flex items-center rounded relative bg-gray-100 px-3 ml-5 mr-5 md:w-1/4"
  >
    <input
      type="text"
      class="bg-gray-100 text-base outline-none w-full text-gray-700 py-1 pe-2"
    />
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
      class="w-6 h-6 text-gray-400"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"
      />
    </svg>
  </div>
  <div class="ml-auto flex items-center divide-x-2 relative">
    <button
      class="rounded-full hover:bg-gray-100 p-2 me-2 relative"
      (click)="toggleNotifications()"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="w-6 h-6 text-gray-700"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"
        />
      </svg>
      <span
        *ngIf="unreadCount > 0"
        class="absolute -top-0.5 -right-0.5 bg-red-600 text-white text-[10px] leading-none px-1.5 py-0.5 rounded-full"
        >{{ unreadCount }}</span
      >
    </button>
    <!-- Notifications dropdown -->
    <div
      *ngIf="showNotif"
      class="absolute right-12 top-10 w-80 bg-white border border-gray-200 rounded shadow-lg z-30"
    >
      <div class="px-3 py-2 border-b font-medium text-gray-700">
        Notificações
      </div>
      <div class="max-h-80 overflow-auto">
        <div
          *ngIf="notifications.length === 0"
          class="p-3 text-sm text-gray-500"
        >
          Sem notificações
        </div>
        <div
          *ngFor="let n of notifications"
          class="p-3 border-b last:border-b-0 cursor-pointer hover:bg-gray-50"
          (click)="onNotificationClick(n)"
        >
          <p class="text-sm" [class.font-semibold]="!n.lido">
            {{ n.mensagem }}
          </p>
          <p class="text-xs text-gray-500 mt-1">
            {{ n.criado_em | date: "short" }}
          </p>
        </div>
      </div>
    </div>
    <div class="ps-4 flex items-center">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="currentColor"
        class="w-8 h-8 text-gray-700 mr-2"
      >
        <path
          fill-rule="evenodd"
          d="M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"
          clip-rule="evenodd"
        />
      </svg>
      <span class="font-medium hidden md:block text-gray-700 md:mr-3">
        {{ username }}
      </span>
      <button
        class="rounded-lg bg-violet-700 hover:bg-violet-800 p-2"
        (click)="logout()"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="w-5 h-5 text-white"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"
          />
        </svg>
      </button>
    </div>
  </div>
</header>
